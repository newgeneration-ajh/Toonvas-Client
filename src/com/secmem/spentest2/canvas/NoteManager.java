package com.secmem.spentest2.canvas;

import java.io.IOException;

import android.content.Context;
import android.graphics.Rect;
import android.view.Display;

import com.samsung.android.sdk.pen.document.SpenNoteDoc;
import com.samsung.android.sdk.pen.document.SpenPageDoc;
import com.samsung.android.sdk.pen.engine.SpenSurfaceView;

public class NoteManager {
	
	private final int 			DEFAULT_COLOR	= 0xFFD6E6F5;
	private int 						m_PageCounter 	= 0;
	private SpenNoteDoc			m_Notedoc	  		= null;
	private SpenSurfaceView 		m_ViewControler	= null;
	
	
	NoteManager ( Context context , Display display , SpenSurfaceView spensurfaceview ) {
		
		m_ViewControler = spensurfaceview;
		
		Rect rect = new Rect();
		
		display.getRectSize( rect );
		
		try {
			m_Notedoc = new SpenNoteDoc ( context , rect.width() , rect.height() );
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		//appendPage( );
		
	}
	
	private SpenPageDoc intiPage ( int color , SpenPageDoc inDataPageDoc ) {
		
		inDataPageDoc = m_Notedoc.appendPage();
		inDataPageDoc.setBackgroundColor( color );
		inDataPageDoc.clearHistory();
		
		m_PageCounter++;
		
		return inDataPageDoc;
	}
	
	public SpenPageDoc appendPage ( ) {
		SpenPageDoc inDataPageDoc = null;
		
		intiPage( DEFAULT_COLOR , inDataPageDoc );
		
		return inDataPageDoc;
	}//default color
	
	public SpenPageDoc appendPage ( int color ) {
		SpenPageDoc inDataPageDoc = null;
		
		intiPage( color , inDataPageDoc );
		
		return inDataPageDoc;
	}//color
	
	public boolean removePage (int PageNum ) {
		if ( m_PageCounter >= PageNum ) {
			m_Notedoc.removePage( PageNum );
			return true;
		}
		else{
			return false;
		}
	}
	
	public boolean conversionPage ( int PageNum ) {
		if ( m_PageCounter >= PageNum ) {
			m_ViewControler.setPageDoc( m_Notedoc.getPage( PageNum - 1 ) , true );
			return true;
		}
		else {
			return false;
		}
	}
	
	
}
